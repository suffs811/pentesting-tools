#!/bin/bash	

ip="http://$1"

if [ "$ip" = "" ] || [ "$ip" = " " ];then
	echo
	echo "[-] provide an ip address"
	echo
	echo "usage: webrecon 10.0.0.0"
	echo
	exit
fi

echo "################################"
echo "########## WebRecon ############"
echo "################################"
echo
echo "[#] Scanning $ip..."
echo

if [ ! -d "web" ];then
	mkdir web
fi
if [ ! -d "web/recon" ];then
	mkdir web/recon
fi

echo
echo "[+] getting subdomains..."
assetfinder $ip | tee web/recon/subdomains.txt

echo 
echo "[+] scanning robots.txt..."
curl $ip/robots.txt | tee web/recon/robots.txt

echo
ffuf -timeout 2 -r -u $ip/FUZZ -w /usr/share/wordlists/dirb/big.txt:FUZZ -c | tee web/recon/directories.txt

echo
dirb $ip /usr/share/wordlists/dirb/big.txt | tee -a /web/recon/directories.txt

echo
echo "[+] getting directories..."
gobuster dir -r --timeout 2s -u $ip -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -o directories.txt | tee -a web/recon/directories.txt

echo
echo "[+] scanning with nikto..."
nikto -h $ip -t 2 -f -F htm -o web/recon/nikto.html

echo
echo "[#] results saved to web/recon/"
echo
